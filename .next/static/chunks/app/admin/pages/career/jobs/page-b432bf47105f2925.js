(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[982],{3449:function(e,t,s){Promise.resolve().then(s.bind(s,9450))},9450:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var r=s(7437),i=s(2265),a=s(4809),l=s(5674);function n(e){let{job:t,onSubmit:s,onCancel:a,isSubmitting:n=!1}=e,[o,c]=(0,i.useState)({title:"",description:"",requirements:"",responsibilities:"",location:"",type:"FULL_TIME",salary:"",active:!0,...t}),[d,m]=(0,i.useState)({});(0,i.useEffect)(()=>{t&&c({...t,salary:t.salary||""})},[t]);let x=e=>{let{name:t,value:s}=e.target;c(e=>({...e,[t]:s})),d[t]&&m(e=>{let s={...e};return delete s[t],s})},p=()=>{let e={};return o.title.trim()||(e.title="Title is required"),o.description.trim()||(e.description="Description is required"),o.requirements.trim()||(e.requirements="Requirements are required"),o.responsibilities.trim()||(e.responsibilities="Responsibilities are required"),o.location.trim()||(e.location="Location is required"),o.type||(e.type="Job type is required"),m(e),0===Object.keys(e).length};return(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),p()&&s(o)},className:"space-y-6 pb-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Job Title*"}),(0,r.jsx)("input",{type:"text",id:"title",name:"title",value:o.title,onChange:x,className:"mt-1 block w-full rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm ".concat(d.title?"border-red-300":"border-gray-300"),placeholder:"e.g. Senior Software Engineer"}),d.title&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:d.title})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700",children:"Location*"}),(0,r.jsx)("input",{type:"text",id:"location",name:"location",value:o.location,onChange:x,className:"mt-1 block w-full rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm ".concat(d.location?"border-red-300":"border-gray-300"),placeholder:"e.g. Remote / Hybrid / New York, NY"}),d.location&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:d.location})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-700",children:"Job Type*"}),(0,r.jsxs)("select",{id:"type",name:"type",value:o.type,onChange:x,className:"mt-1 block w-full rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm ".concat(d.type?"border-red-300":"border-gray-300"),children:[(0,r.jsx)("option",{value:"FULL_TIME",children:"Full Time"}),(0,r.jsx)("option",{value:"PART_TIME",children:"Part Time"}),(0,r.jsx)("option",{value:"CONTRACT",children:"Contract"}),(0,r.jsx)("option",{value:"INTERNSHIP",children:"Internship"}),(0,r.jsx)("option",{value:"REMOTE",children:"Remote"})]}),d.type&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:d.type})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"salary",className:"block text-sm font-medium text-gray-700",children:"Salary Range (Optional)"}),(0,r.jsx)("input",{type:"text",id:"salary",name:"salary",value:o.salary||"",onChange:x,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"e.g. $80,000 - $100,000"})]}),(0,r.jsxs)("div",{className:"flex items-center h-full pt-6",children:[(0,r.jsx)("input",{type:"checkbox",id:"active",name:"active",checked:o.active,onChange:e=>{let{name:t,checked:s}=e.target;c(e=>({...e,[t]:s}))},className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,r.jsx)("label",{htmlFor:"active",className:"ml-2 block text-sm text-gray-700",children:"Active (visible on career page)"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Job Description*"}),(0,r.jsx)("textarea",{id:"description",name:"description",rows:6,value:o.description,onChange:x,className:"mt-1 block w-full rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm ".concat(d.description?"border-red-300":"border-gray-300"),placeholder:"Describe the job role, responsibilities, and what the candidate will be doing..."}),d.description&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:d.description})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"requirements",className:"block text-sm font-medium text-gray-700",children:"Job Requirements*"}),(0,r.jsx)("textarea",{id:"requirements",name:"requirements",rows:6,value:o.requirements,onChange:x,className:"mt-1 block w-full rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm ".concat(d.requirements?"border-red-300":"border-gray-300"),placeholder:"List the skills, qualifications, and experience required for this position..."}),(0,r.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Tip: Use line breaks to separate individual requirements for better readability."}),d.requirements&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:d.requirements})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"responsibilities",className:"block text-sm font-medium text-gray-700",children:"Job Responsibilities*"}),(0,r.jsx)("textarea",{id:"responsibilities",name:"responsibilities",rows:6,value:o.responsibilities,onChange:x,className:"mt-1 block w-full rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm ".concat(d.responsibilities?"border-red-300":"border-gray-300"),placeholder:"List the key responsibilities and duties for this position..."}),(0,r.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Tip: Use line breaks to separate individual responsibilities for better readability."}),d.responsibilities&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:d.responsibilities})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 mt-4 border-t border-gray-200",children:[(0,r.jsxs)("button",{type:"button",onClick:a,className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",disabled:n,children:[(0,r.jsx)(l.aHS,{className:"mr-2 -ml-1 h-4 w-4"}),"Cancel"]}),(0,r.jsxs)("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",disabled:n,children:[(0,r.jsx)(l.TvB,{className:"mr-2 -ml-1 h-4 w-4"}),n?"Saving...":(null==t?void 0:t.id)?"Update Job":"Create Job"]})]})]})}var o=s(7648);function c(){let[e,t]=(0,i.useState)([]),[s,c]=(0,i.useState)(!0),[d,m]=(0,i.useState)(null),[x,p]=(0,i.useState)({status:"all",type:"all",search:""}),[u,h]=(0,i.useState)(null),[y,b]=(0,i.useState)(!1),[g,j]=(0,i.useState)("create");(0,i.useEffect)(()=>{(async()=>{try{c(!0);let e=new URLSearchParams;"all"!==x.status&&e.append("status",x.status),"all"!==x.type&&e.append("type",x.type),x.search&&e.append("search",x.search);let s=e.toString(),r=await fetch("/api/admin/jobs".concat(s?"?".concat(s):""));if(!r.ok)throw Error("Failed to fetch job listings");let i=await r.json();t(i)}catch(e){m(e instanceof Error?e.message:"An unknown error occurred"),t([])}finally{c(!1)}})()},[x]);let f=e=>{h(e),j("edit"),b(!0)},v=e=>{h(e),j("view"),b(!0)},N=async s=>{try{if(c(!0),"create"===g){let r=await fetch("/api/admin/jobs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to create job listing")}let i=await r.json();t([i,...e])}else if("edit"===g&&u){let r=await fetch("/api/admin/jobs?id=".concat(u.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to update job listing")}let i=await r.json();t(e.map(e=>e.id===i.id?i:e))}b(!1),m(null)}catch(e){m(e instanceof Error?e.message:"An error occurred while saving the job")}finally{c(!1)}},w=()=>{b(!1),m(null)},k=async s=>{if(window.confirm("Are you sure you want to delete this job listing? This action cannot be undone."))try{let r=await fetch("/api/admin/jobs?id=".concat(s),{method:"DELETE"});if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to delete job listing")}t(e.filter(e=>e.id!==s))}catch(e){m(e instanceof Error?e.message:"Failed to delete job listing")}},C=async s=>{try{let r=await fetch("/api/admin/jobs?id=".concat(s.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({active:!s.active})});if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to update job status")}let i=await r.json();t(e.map(e=>e.id===s.id?i:e))}catch(e){m(e instanceof Error?e.message:"Failed to update job status")}};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(a.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Job Openings Management"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Create, edit, and manage job listings for your career page."})]}),(0,r.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center space-y-4 md:space-y-0 mb-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 w-full md:w-auto",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)(l.U41,{className:"h-5 w-5 text-gray-400"})}),(0,r.jsx)("input",{type:"text",placeholder:"Search jobs...",className:"pl-10 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",value:x.search,onChange:e=>p({...x,search:e.target.value})})]}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsxs)("select",{className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",value:x.status,onChange:e=>p({...x,status:e.target.value}),children:[(0,r.jsx)("option",{value:"all",children:"All Status"}),(0,r.jsx)("option",{value:"active",children:"Active"}),(0,r.jsx)("option",{value:"inactive",children:"Inactive"})]}),(0,r.jsxs)("select",{className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",value:x.type,onChange:e=>p({...x,type:e.target.value}),children:[(0,r.jsx)("option",{value:"all",children:"All Types"}),(0,r.jsx)("option",{value:"FULL_TIME",children:"Full Time"}),(0,r.jsx)("option",{value:"PART_TIME",children:"Part Time"}),(0,r.jsx)("option",{value:"CONTRACT",children:"Contract"}),(0,r.jsx)("option",{value:"INTERNSHIP",children:"Internship"}),(0,r.jsx)("option",{value:"REMOTE",children:"Remote"})]})]})]}),(0,r.jsxs)("button",{onClick:()=>{h(null),j("create"),b(!0)},className:"btn-primary flex items-center space-x-2",children:[(0,r.jsx)(l.wEH,{}),(0,r.jsx)("span",{children:"Add New Job"})]})]}),s?(0,r.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}):d?(0,r.jsx)("div",{className:"bg-red-50 text-red-600 p-4 rounded-md",children:d}):0===e.length?(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)(l.I8D,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,r.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No job listings found"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:x.search||"all"!==x.status||"all"!==x.type?"Try adjusting your filters to see more results.":"Get started by creating a new job listing."})]}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Job Title"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Applications"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>{var t;return(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:e.slug})]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.location}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:e.type.replace("_"," ")})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(null===(t=e._count)||void 0===t?void 0:t.applications)||0}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("button",{onClick:()=>C(e),className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(e.active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.active?"Active":"Inactive"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsx)("button",{onClick:()=>v(e),className:"text-indigo-600 hover:text-indigo-900",title:"View Details",children:(0,r.jsx)(l.dSq,{})}),(0,r.jsx)("button",{onClick:()=>f(e),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:(0,r.jsx)(l.fmQ,{})}),(0,r.jsx)("button",{onClick:()=>k(e.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:(0,r.jsx)(l.Xm5,{})}),(0,r.jsx)(o.default,{href:"/admin/pages/career/jobs/applications/".concat(e.id),className:"text-green-600 hover:text-green-900",title:"View Applications",children:(0,r.jsx)(l.I$,{})})]})})]},e.id)})})]})})]}),y&&(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 p-2 sm:p-4 overflow-y-auto",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto my-2 sm:my-4 mx-auto",children:[(0,r.jsx)("div",{className:"sticky top-0 bg-white px-6 py-4 border-b border-gray-200 z-10",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"create"===g?"Create New Job Listing":"edit"===g?"Edit Job Listing":"Job Listing Details"}),(0,r.jsxs)("button",{onClick:w,className:"text-gray-400 hover:text-gray-500",children:[(0,r.jsx)("span",{className:"sr-only",children:"Close"}),(0,r.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})]})]})}),(0,r.jsxs)("div",{className:"px-6 py-4",children:[d&&(0,r.jsx)("div",{className:"mb-4 bg-red-50 text-red-600 p-4 rounded-md",children:d}),"view"===g?(0,r.jsxs)("div",{className:"space-y-6 pb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-500",children:"Job Title"}),(0,r.jsx)("p",{className:"mt-1 text-lg font-medium",children:null==u?void 0:u.title})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-500",children:"Location"}),(0,r.jsx)("p",{className:"mt-1",children:null==u?void 0:u.location})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-500",children:"Job Type"}),(0,r.jsx)("p",{className:"mt-1",children:null==u?void 0:u.type.replace("_"," ")})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-500",children:"Salary Range"}),(0,r.jsx)("p",{className:"mt-1",children:(null==u?void 0:u.salary)||"Not specified"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-500",children:"Status"}),(0,r.jsx)("p",{className:"mt-1",children:(0,r.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat((null==u?void 0:u.active)?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:(null==u?void 0:u.active)?"Active":"Inactive"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-500",children:"Description"}),(0,r.jsx)("div",{className:"mt-1 prose max-w-none",children:(0,r.jsx)("p",{className:"whitespace-pre-wrap",children:null==u?void 0:u.description})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-500",children:"Requirements"}),(0,r.jsx)("div",{className:"mt-1 prose max-w-none",children:(0,r.jsx)("p",{className:"whitespace-pre-wrap",children:null==u?void 0:u.requirements})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-500",children:"Responsibilities"}),(0,r.jsx)("div",{className:"mt-1 prose max-w-none",children:(0,r.jsx)("p",{className:"whitespace-pre-wrap",children:null==u?void 0:u.responsibilities})})]}),(0,r.jsx)("div",{className:"pt-4 border-t border-gray-200 flex justify-end",children:(0,r.jsx)("button",{onClick:()=>b(!1),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Close"})})]}):(0,r.jsx)(n,{job:u||void 0,onSubmit:N,onCancel:w,isSubmitting:s})]})]})})]})}},178:function(e,t,s){"use strict";s.d(t,{w_:function(){return o}});var r=s(2265),i={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},a=r.createContext&&r.createContext(i),l=function(){return(l=Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++)for(var i in t=arguments[s])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},n=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(s[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(s[r[i]]=e[r[i]]);return s};function o(e){return function(t){return r.createElement(c,l({attr:l({},e.attr)},t),function e(t){return t&&t.map(function(t,s){return r.createElement(t.tag,l({key:s},t.attr),e(t.child))})}(e.child))}}function c(e){var t=function(t){var s,i=e.attr,a=e.size,o=e.title,c=n(e,["attr","size","title"]),d=a||t.size||"1em";return t.className&&(s=t.className),e.className&&(s=(s?s+" ":"")+e.className),r.createElement("svg",l({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,c,{className:s,style:l(l({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),o&&r.createElement("title",null,o),e.children)};return void 0!==a?r.createElement(a.Consumer,null,function(e){return t(e)}):t(i)}}},function(e){e.O(0,[420,809,648,971,117,744],function(){return e(e.s=3449)}),_N_E=e.O()}]);