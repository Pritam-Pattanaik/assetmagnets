(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4461:function(e,t,s){Promise.resolve().then(s.bind(s,6623))},6623:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var a=s(7437),r=s(2265),l=s(4809),i=s(5674),n=s(7648);function c(e){let{params:t}=e,{jobId:s}=t,[c,o]=(0,r.useState)([]),[d,m]=(0,r.useState)(null),[x,u]=(0,r.useState)(!0),[h,p]=(0,r.useState)(null),[f,j]=(0,r.useState)({status:"all",search:""}),[y,g]=(0,r.useState)(null),[N,v]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{try{u(!0);let e=new URLSearchParams;e.append("jobId",s),"all"!==f.status&&e.append("status",f.status),f.search&&e.append("search",f.search);let t=e.toString(),a=await fetch("/api/admin/jobs/applications?".concat(t));if(!a.ok)throw Error("Failed to fetch job applications");let r=await a.json();o(r.applications),m(r.jobDetails)}catch(e){p(e instanceof Error?e.message:"An unknown error occurred")}finally{u(!1)}})()},[s,f.status,f.search]);let b=c.filter(e=>("all"===f.status||e.status===f.status)&&(!f.search||!!(e.name.toLowerCase().includes(f.search.toLowerCase())||e.email.toLowerCase().includes(f.search.toLowerCase())))),w=e=>{g(e),v(!0)},E=async(e,t)=>{try{if(!(await fetch("/api/admin/applications/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:t})})).ok)throw Error("Failed to update application status");o(c.map(s=>s.id===e?{...s,status:t}:s)),y&&y.id===e&&g({...y,status:t})}catch(e){p(e instanceof Error?e.message:"Failed to update application status")}},C=e=>{switch(e){case"RECEIVED":return"bg-blue-100 text-blue-800";case"REVIEWING":return"bg-yellow-100 text-yellow-800";case"INTERVIEW":return"bg-purple-100 text-purple-800";case"REJECTED":return"bg-red-100 text-red-800";case"ACCEPTED":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},k=e=>{switch(e){case"RECEIVED":return(0,a.jsx)(i.qyc,{className:"mr-1"});case"REVIEWING":return(0,a.jsx)(i.Xws,{className:"mr-1"});case"INTERVIEW":return(0,a.jsx)(i.XdU,{className:"mr-1"});case"REJECTED":return(0,a.jsx)(i.aHS,{className:"mr-1"});case"ACCEPTED":return(0,a.jsx)(i.l_A,{className:"mr-1"});default:return null}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)(n.default,{href:"/admin/pages/career/jobs",className:"inline-flex items-center text-primary-600 hover:text-primary-700 mb-2",children:[(0,a.jsx)(i.x_l,{className:"mr-2"})," Back to Job Listings"]}),(0,a.jsxs)("h1",{className:"text-2xl font-bold text-gray-900",children:["Applications for ",(null==d?void 0:d.title)||"Job Position"]}),(0,a.jsx)("p",{className:"text-gray-600",children:"Manage and review applications for this position."})]})}),(0,a.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6",children:[(0,a.jsx)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0 mb-6",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 w-full sm:w-auto",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search by name or email...",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",value:f.search,onChange:e=>j({...f,search:e.target.value})}),(0,a.jsxs)("select",{className:"block w-full sm:w-auto rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",value:f.status,onChange:e=>j({...f,status:e.target.value}),children:[(0,a.jsx)("option",{value:"all",children:"All Status"}),(0,a.jsx)("option",{value:"RECEIVED",children:"Received"}),(0,a.jsx)("option",{value:"REVIEWING",children:"Reviewing"}),(0,a.jsx)("option",{value:"INTERVIEW",children:"Interview"}),(0,a.jsx)("option",{value:"REJECTED",children:"Rejected"}),(0,a.jsx)("option",{value:"ACCEPTED",children:"Accepted"})]})]})}),x?(0,a.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}):h?(0,a.jsx)("div",{className:"bg-red-50 text-red-600 p-4 rounded-md",children:h}):0===b.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(i.Xws,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No applications found"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:f.search||"all"!==f.status?"Try adjusting your filters to see more results.":"There are no applications for this job listing yet."})]}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Applicant"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date Applied"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0 h-10 w-10 bg-gray-200 rounded-full flex items-center justify-center",children:(0,a.jsx)(i.Xws,{className:"text-gray-500"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.position})]})]})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-900 flex items-center",children:[(0,a.jsx)(i.SRX,{className:"mr-2 text-gray-400"})," ",e.email]}),e.phone&&(0,a.jsxs)("div",{className:"text-sm text-gray-500 flex items-center",children:[(0,a.jsx)(i.I7T,{className:"mr-2 text-gray-400"})," ",e.phone]})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(C(e.status)),children:[k(e.status),e.status.charAt(0)+e.status.slice(1).toLowerCase()]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("button",{onClick:()=>w(e),className:"text-indigo-600 hover:text-indigo-900",title:"View Details",children:"View Details"}),(0,a.jsxs)("a",{href:e.resumeUrl,target:"_blank",rel:"noopener noreferrer",className:"text-green-600 hover:text-green-900 flex items-center",title:"Download Resume",children:[(0,a.jsx)(i.aBF,{className:"mr-1"})," Resume"]})]})})]},e.id))})]})})]}),N&&y&&(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Application Details"}),(0,a.jsxs)("button",{onClick:()=>v(!1),className:"text-gray-400 hover:text-gray-500",children:[(0,a.jsx)("span",{className:"sr-only",children:"Close"}),(0,a.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})]})]})}),(0,a.jsxs)("div",{className:"px-6 py-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Applicant Name"}),(0,a.jsx)("p",{className:"text-base",children:y.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Position"}),(0,a.jsx)("p",{className:"text-base",children:y.position})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Email"}),(0,a.jsx)("p",{className:"text-base",children:y.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Phone"}),(0,a.jsx)("p",{className:"text-base",children:y.phone||"Not provided"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Date Applied"}),(0,a.jsx)("p",{className:"text-base",children:new Date(y.createdAt).toLocaleDateString()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Status"}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(C(y.status)),children:[k(y.status),y.status.charAt(0)+y.status.slice(1).toLowerCase()]}),(0,a.jsx)("div",{className:"ml-4",children:(0,a.jsxs)("select",{className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 text-sm",value:y.status,onChange:e=>E(y.id,e.target.value),children:[(0,a.jsx)("option",{value:"RECEIVED",children:"Received"}),(0,a.jsx)("option",{value:"REVIEWING",children:"Reviewing"}),(0,a.jsx)("option",{value:"INTERVIEW",children:"Interview"}),(0,a.jsx)("option",{value:"REJECTED",children:"Rejected"}),(0,a.jsx)("option",{value:"ACCEPTED",children:"Accepted"})]})})]})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Resume"}),(0,a.jsxs)("a",{href:y.resumeUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700",children:[(0,a.jsx)(i.aBF,{className:"mr-2"})," Download Resume"]})]}),y.coverLetter&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Cover Letter"}),(0,a.jsx)("div",{className:"bg-gray-50 p-4 rounded-md whitespace-pre-wrap",children:y.coverLetter})]})]}),(0,a.jsx)("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end",children:(0,a.jsx)("button",{onClick:()=>v(!1),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Close"})})]})})]})}},178:function(e,t,s){"use strict";s.d(t,{w_:function(){return c}});var a=s(2265),r={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},l=a.createContext&&a.createContext(r),i=function(){return(i=Object.assign||function(e){for(var t,s=1,a=arguments.length;s<a;s++)for(var r in t=arguments[s])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},n=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)0>t.indexOf(a[r])&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(s[a[r]]=e[a[r]]);return s};function c(e){return function(t){return a.createElement(o,i({attr:i({},e.attr)},t),function e(t){return t&&t.map(function(t,s){return a.createElement(t.tag,i({key:s},t.attr),e(t.child))})}(e.child))}}function o(e){var t=function(t){var s,r=e.attr,l=e.size,c=e.title,o=n(e,["attr","size","title"]),d=l||t.size||"1em";return t.className&&(s=t.className),e.className&&(s=(s?s+" ":"")+e.className),a.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,o,{className:s,style:i(i({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),c&&a.createElement("title",null,c),e.children)};return void 0!==l?a.createElement(l.Consumer,null,function(e){return t(e)}):t(r)}}},function(e){e.O(0,[420,809,648,971,117,744],function(){return e(e.s=4461)}),_N_E=e.O()}]);