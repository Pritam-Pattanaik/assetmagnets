"use strict";(()=>{var e={};e.id=386,e.ids=[386],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},65031:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>h,patchFetch:()=>y,requestAsyncStorage:()=>p,routeModule:()=>l,serverHooks:()=>m,staticGenerationAsyncStorage:()=>f});var r={};a.r(r),a.d(r,{GET:()=>d,POST:()=>u});var o=a(49303),i=a(88716),n=a(60670),s=a(87070);let c=new(a(53524)).PrismaClient;async function d(){try{let e=await c.contactInfo.findMany({orderBy:{createdAt:"desc"}}),t=await c.socialMedia.findMany({where:{isActive:!0}});return s.NextResponse.json({branches:e,socialMedia:t},{status:200})}catch(e){return console.error("Error fetching contact information:",e),s.NextResponse.json({error:"Failed to fetch contact information"},{status:500})}}async function u(e){try{let{branches:t,socialMedia:a}=await e.json();if(t&&Array.isArray(t)){let e=(await c.contactInfo.findMany({select:{id:!0}})).map(e=>e.id),a=t.filter(e=>e.id).map(e=>e.id),r=e.filter(e=>!a.includes(e));for(let a of(r.length>0&&await c.contactInfo.deleteMany({where:{id:{in:r}}}),t))a.id&&e.includes(a.id)?await c.contactInfo.update({where:{id:a.id},data:{name:a.name,country:a.country,address:a.address,phone:a.phone,email:a.email,officeHours:a.officeHours,isDefault:a.isDefault||!1}}):await c.contactInfo.create({data:{name:a.name,country:a.country,address:a.address,phone:a.phone||"",email:a.email||"",officeHours:a.officeHours||"",isDefault:a.isDefault||!1}})}if(a&&"object"==typeof a){let e=await c.socialMedia.findMany({select:{id:!0,platform:!0}});for(let[t,r]of Object.entries(a)){let a=e.find(e=>e.platform===t);a?await c.socialMedia.update({where:{id:a.id},data:{url:r}}):await c.socialMedia.create({data:{platform:t,url:r}})}}return s.NextResponse.json({success:!0},{status:200})}catch(e){return console.error("Error updating contact information:",e),s.NextResponse.json({error:"Failed to update contact information"},{status:500})}}let l=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/contact/route",pathname:"/api/contact",filename:"route",bundlePath:"app/api/contact/route"},resolvedPagePath:"C:\\Users\\Pritam\\Desktop\\assetmagnets\\app\\api\\contact\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:p,staticGenerationAsyncStorage:f,serverHooks:m}=l,h="/api/contact/route";function y(){return(0,n.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:f})}}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[276,972],()=>a(65031));module.exports=r})();